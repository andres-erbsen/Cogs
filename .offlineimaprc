[general]
metadata = /home/andres/mail/offlineimap-metadata
maxsyncaccounts = 100
accounts = andres.erbsen@gmail.com
# ui = Curses.Blinkenlights, TTY.TTYUI, Noninteractive.Basic, Noninteractive.Quiet
# do not force writing data to disk
fsync = false 

[Account andres.erbsen@gmail.com]
localrepository = local:andres.erbsen@gmail.com
remoterepository = remote:andres.erbsen@gmail.com
# minutes
autorefresh = 5
# a full sync after 10 quick syncs
quick = 10 

[Repository local:andres.erbsen@gmail.com]
type = Maildir
localfolders = /home/andres/mail/andres.erbsen@gmail.com
# use real folders, not name tricks
sep = / 

[Repository remote:andres.erbsen@gmail.com]
type = Gmail
remoteuser = andres.erbsen@gmail.com
# 3. The remote password stored as a single line in an external
#    file, which is referenced by the remotefile option.  Example:
# remotepassfile = ~/Password.IMAP.Account1
# leave message to "all mail", do not move to trash. Just delete labels.
realdelete = no 
# keepalive = 60 
# maxconnections = 3
nametrans = lambda foldername: re.sub ('^\[gmail\].', '',
    re.sub ('sent_mail', 'sent',
        re.sub ('starred', 'flagged',
            re.sub (' ', '_', foldername.lower()))))
folderfilter = lambda foldername: any(foldername in s for s in ['[Gmail]/All Mail', '[Gmail]/Trash', '[Gmail]/Spam'])
